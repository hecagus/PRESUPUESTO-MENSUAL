<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Administraci√≥n ‚Äì Uber Eats Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
</head>
<body data-page="admin">

<header class="header">
  <h1>Panel Administrativo</h1>
  <a href="index.html" class="btn-admin" id="adminButton" type="button">‚¨Ö Volver al Panel</a>
</header>

<main class="container">

  <section class="card" id="cardTurnos">
    <h2>Gesti√≥n de Turno</h2>
    <p id="turnoTexto" style="margin-bottom:10px;">üî¥ Sin turno activo</p>
    <button id="btnIniciarTurno" class="btn-success" type="button">Iniciar Turno</button>
    <button id="btnFinalizarTurno" class="btn-danger" type="button" style="display:none;">Finalizar Turno</button>
    <p class="nota">Al iniciar, el KM Inicial se registra autom√°ticamente. Si no hay, ponlo manual.</p>
  </section>

  <section class="card">
    <h2>Registrar Ingreso (Trabajo)</h2>
    <label>Descripci√≥n:</label>
    <input type="text" id="ingresoDescripcion" placeholder="Ej. Propina extra, Pago Plataforma" />
    <label>Monto:</label>
    <input type="number" id="ingresoCantidad" placeholder="0.00" />
    <button id="btnGuardarIngreso" class="btn-primary" type="button">Guardar Ingreso</button>
  </section>

  <section class="card">
    <h2>Registro de Gasolina (Carga)</h2>
    <label>Litros Cargados:</label>
    <input type="number" id="litrosGas" placeholder="0.00" />
    <label>Costo Total ($):</label>
    <input type="number" id="costoGas" placeholder="0.00" />
    <button id="btnGuardarGas" class="btn-primary" type="button">Guardar Carga y Gasto</button>
  </section>

  <section class="card">
    <h2>Registrar Gasto General</h2>
    <label>Descripci√≥n:</label>
    <input type="text" id="gastoDescripcion" placeholder="Ej. Agua, Comida, Renta..." />
    <label>Monto:</label>
    <input type="number" id="gastoCantidad" placeholder="0.00" />
    <label>Categor√≠a:</label>
    <select id="gastoCategoria">
      <optgroup label="TRABAJO (Variables)">
        <option value="Comida TRABAJO">Comida (Turno)</option>
        <option value="Transporte (Peaje)">Peajes/Parking</option>
        <option value="Mantenimiento VEH√çCULO">Mantenimiento (Aceite, Buj√≠as, etc.)</option>
        <option value="Abono a Deuda TRABAJO">Abono a Deuda</option>
        <option value="Otros TRABAJO">Otros gastos (Turno)</option>
      </optgroup>
      <optgroup label="HOGAR (Fijos/Diarios)">
        <option value="Comida HOGAR">Comida (Diaria/Super)</option>
        <option value="Renta/Hipotecar">Renta/Hipotecar</option>
        <option value="Servicios/Luz/Agua">Servicios (Luz, Agua, Internet)</option>
        <option value="Otros HOGAR">Otros gastos (Hogar)</option>
      </optgroup>
    </select>
    <button id="btnGuardarGasto" class="btn-primary" type="button">Guardar Gasto</button>
  </section>

  <section class="card">
    <h2>Registro de Kilometraje</h2>
    <label>KM Inicial (Od√≥metro):</label>
    <input type="number" id="kmInicial" placeholder="0" readonly style="background:#eee;" />
    <label>KM Final (Od√≥metro):</label>
    <input type="number" id="kmFinal" placeholder="0" />
    <p>KM Recorridos: <strong id="kmRecorridos">0</strong></p>
    <button id="btnGuardarKm" class="btn-primary" type="button">Guardar KM</button>
    <p class="nota">‚ö† El KM Final debe ser mayor al KM Inicial. (Validaci√≥n autom√°tica)</p>
  </section>

  <section class="card">
    <h2>Par√°metros Autom√°ticos</h2>
    <label>Deuda Total Pendiente:</label>
    <input type="text" id="proyDeudaTotal" readonly style="background:#eee;" />
    <label>Gasto Fijo Diario (HOGAR):</label>
    <input type="text" id="proyGastoFijo" readonly style="background:#eee;" />
  </section>

  <section class="card" id="cardDeudas">
    <h2>Gesti√≥n de Deudas</h2>

    <div id="deudaWizardContainer">
      <div id="deudaStep1" style="display:block;">
        <h3>Nueva Deuda (Paso 1/4)</h3>
        <label>Nombre de la deuda (Ej. Banco, Moto)</label>
        <input type="text" id="deudaNombre" placeholder="Ej. Banco, Moto Blast" />
      </div>

      <div id="deudaStep2" style="display:none;">
        <h3>Monto Total (Paso 2/4)</h3>
        <label>Monto Total de la Deuda ($)</label>
        <input type="number" id="deudaMonto" placeholder="0.00" />
      </div>

      <div id="deudaStep3" style="display:none;">
        <h3>Frecuencia de Pago (Paso 3/4)</h3>
        <label>¬øCada cu√°nto abonas?</label>
        <select id="deudaFrecuencia">
          <option value="">-- Seleccionar --</option>
          <option value="Semanal">Semanal</option>
          <option value="Quincenal">Quincenal</option>
          <option value="Mensual">Mensual</option>
        </select>
      </div>

      <div id="deudaStep4" style="display:none;">
        <h3>Monto del Abono (Paso 4/4)</h3>
        <label>¬øDe cu√°nto es tu abono habitual ($)?</label>
        <input type="number" id="deudaAbonoSugerido" placeholder="0.00" />
      </div>

      <div style="margin-top:15px;">
        <button id="btnDeudaBack" class="btn-secondary" type="button" style="display:none;">‚¨Ö Anterior</button>
        <button id="btnDeudaNext" class="btn-secondary" type="button">Siguiente ‚û°</button>
        <button id="btnRegistrarDeudaFinal" class="btn-primary" type="button" style="display:none;">Registrar Deuda</button>
      </div>
    </div>

    <hr style="margin:20px 0;" />

    <h3>Registrar Abono</h3>
    <label>Seleccionar Deuda:</label>
    <select id="abonoSeleccionar"></select>
    <label>Cantidad a abonar ($):</label>
    <input type="number" id="abonoMonto" />
    <button id="btnRegistrarAbono" class="btn-success" type="button">Registrar Abono</button>
    <p class="nota">‚ö† El abono no puede ser mayor al saldo pendiente. (Validaci√≥n autom√°tica)</p>

    <hr style="margin:20px 0;" />

    <h3>Deudas Pendientes</h3>
    <ul id="listaDeudas" class="list"></ul>
  </section>

  <section class="card">
    <h2>Datos y Respaldo</h2>
    <button id="btnExportarExcel" class="btn-success" type="button">Descargar Excel (.xlsx)</button>
    <button id="btnExportar" class="btn-secondary" type="button">Copiar JSON</button>
    <p class="nota">El respaldo autom√°tico se guarda en <strong>localStorage</strong> con la clave <strong>panelData_backup_v1</strong>.</p>

    <div style="margin-top:15px; border-top:1px solid #eee; padding-top:10px;">
      <textarea id="importJson" rows="3" placeholder="Pega aqu√≠ el JSON para restaurar..."></textarea>
      <button id="btnImportar" class="btn-danger" type="button">Restaurar Datos</button>
    </div>
  </section>

</main>

<!-- Tutorial modal (√∫nico por p√°gina) -->
<div id="tutorialOverlay" class="overlay" style="display:none;"></div>
<div id="tutorialModal" class="modal-center" role="dialog" aria-modal="true" aria-labelledby="tutorialTitle" style="display:none;">
  <h3 id="tutorialTitle">Bienvenido</h3>
  <p id="tutorialText">Iniciando...</p>
  <button id="tutorialNextBtn" class="btn-primary" type="button" style="width:100%; margin-top:10px;">Siguiente</button>
</div>

<script src="app.js"></script>
</body>
</html>
