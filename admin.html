<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panel de Administraci√≥n</title>
<link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<div class="container">
  <button class="back-btn button" onclick="location.href='index.html'">‚üµ Ir al Resumen</button>

  <h2>Panel de Administraci√≥n</h2>

  <!-- Gesti√≥n de Deudas -->
  <div class="card">
    <h3>üí≥ Gesti√≥n de Deudas</h3>
    <table id="tabla-deudas" class="tabla-listado">
      <thead><tr><th>Nombre</th><th>Monto Actual</th><th>Acci√≥n</th></tr></thead>
      <tbody></tbody>
    </table>
    <button class="button" onclick="mostrarFormularioDeuda()">Agregar/Abonar Deuda</button>
  </div>

  <!-- Modal de Deuda -->
  <div id="deuda-modal" class="modal">
    <div class="modal-content card">
      <span class="close-button" onclick="cerrarFormularioDeuda()">&times;</span>

      <h4>Registrar Nueva Deuda</h4>
      <label>Nombre:</label>
      <input type="text" id="deuda-nombre" placeholder="Ej. Cr√©dito Coche">
      <label>Monto Inicial:</label>
      <input type="number" id="deuda-monto-inicial" placeholder="0.00">
      <button class="button" onclick="registrarNuevaDeuda()">Registrar Deuda</button>

      <hr>

      <h4>Abonar a Deuda Existente</h4>
      <label>Seleccionar Deuda:</label>
      <select id="deuda-select-abono"></select>
      <label>Monto del Abono:</label>
      <input type="number" id="deuda-monto-abono" placeholder="0.00">
      <button class="button" onclick="abonarADeuda()">Realizar Abono</button>
    </div>
  </div>

  <!-- Movimientos (ADMIN CAPTURA) -->
  <div class="card">
    <h3>‚ûï Agregar Movimiento (ADMIN)</h3>

    <label>Fecha:</label>
    <input type="date" id="fecha-admin">

    <label>Tipo:</label>
    <select id="tipo-admin">
      <option value="Ingreso">Ingreso</option>
      <option value="Gasto">Gasto</option>
    </select>

    <label>Categor√≠a:</label>
    <select id="categoria-admin"></select>

    <label>Agregar nueva categor√≠a:</label>
    <input type="text" id="nuevaCategoria-admin" placeholder="Ej. Gasolina">
    <button class="button" onclick="agregarCategoria('admin')">Agregar categor√≠a</button>

    <label>Descripci√≥n:</label>
    <input id="mov-desc-admin" placeholder="Descripci√≥n opcional">

    <label>Monto:</label>
    <input type="number" id="monto-admin" placeholder="0.00">

    <button class="button" onclick="agregarMovimiento('admin')">Guardar Movimiento</button>
  </div>

  <!-- Kilometraje -->
  <div class="card">
    <h3>üöó Configuraci√≥n de Kilometraje</h3>
    <label>Kilometraje Inicial:</label>
    <input type="number" id="kmInicial" placeholder="0">
    <label>Kilometraje Final:</label>
    <input type="number" id="kmFinal" placeholder="0">
    <label>Gasto Total (tanque, gas, etc):</label>
    <input type="number" id="gastoTotal" placeholder="0.00">
    <div class="section-title">Precio por km calculado:</div>
    <strong>$<span id="precioKm">0.00</span></strong>
    <button class="button" onclick="calcularKm()">Calcular y guardar</button>
    <button class="button" onclick="cargarConfiguracionKm()">Cargar Configuraci√≥n</button>
  </div>

  <!-- Export / Import -->
  <div class="card">
    <h3>Exportar / Importar Datos</h3>
    <button class="button" onclick="exportarJSON()">Exportar</button>
    <textarea id="json-area" style="min-height:80px;"></textarea><br>
    <button class="button" onclick="importarJSON()">Importar</button>
  </div>

  <!-- Tabla completa de movimientos -->
  <div class="card">
    <h3>Movimientos (todos)</h3>
    <table id="tabla-todos" class="tabla-listado"></table>
  </div>
</div>

<script src="assets/js/app.js"></script>
<script>
window.addEventListener('load', () => {
  onloadApp('admin'); // admin carga captura + vistas admin
});
</script>
</body>
</html>
