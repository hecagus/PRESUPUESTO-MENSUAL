<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AdministraciÃ³n â€“ Uber Eats Tracker</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
</head>
<body data-page="admin">

<header class="header">
  <h1>Panel Administrativo</h1>
  <div class="header-actions">
    <a href="index.html" class="btn-admin" id="adminButton" type="button">â¬… Volver al Panel</a>
  </div>
</header>

<main class="container">

  <section class="card" id="cardTurnos">
    <h2>GestiÃ³n de Turno</h2>
    <p id="turnoTexto" style="margin-bottom:10px;">ğŸ”´ Sin turno activo</p>
    
    <div id="cierreTurnoContainer" style="display:none; margin-top:15px; padding-top:10px; border-top:1px solid #eee;">
        <label style="color:#dc2626; font-weight:bold;">Cierre de DÃ­a:</label>
        <label>KM Final (incluyendo regreso a casa):</label>
        <input type="number" id="kmFinalTurno" placeholder="Lectura del odÃ³metro" />
        <label>Ganancia Bruta del Turno ($):</label>
        <input type="number" id="gananciaBruta" placeholder="0.00" />
    </div>
    
    <button id="btnIniciarTurno" class="btn-success" type="button">Iniciar Turno</button>
    <button id="btnFinalizarTurno" class="btn-danger" type="button" style="display:none;">Finalizar Turno</button>
    <p class="nota">El KM Inicial se toma automÃ¡ticamente del cierre anterior.</p>
  </section>

  <section class="card">
    <h2>Registrar Ingreso (Trabajo)</h2>
    <label>DescripciÃ³n:</label>
    <input type="text" id="ingresoDescripcion" placeholder="Ej. Propina extra" />
    <label>Monto:</label>
    <input type="number" id="ingresoCantidad" placeholder="0.00" />
    <button id="btnRegistrarIngreso" class="btn-primary" type="button">Registrar Ingreso</button>
  </section>

  <section class="card">
    <h2>ğŸ’¸ Registrar Gasto Inteligente</h2>
    
    <div style="display:flex; gap:15px; margin-bottom:15px; font-weight:bold;">
        <label style="cursor:pointer;">
            <input type="radio" name="gastoTipoRadio" value="moto" checked> ğŸï¸ Operativo (Moto)
        </label>
        <label style="cursor:pointer;">
            <input type="radio" name="gastoTipoRadio" value="hogar"> ğŸ  Personal (Hogar)
        </label>
    </div>

    <label>CategorÃ­a:</label>
    <select id="gastoCategoriaSelect" style="width:100%; padding:8px; margin-bottom:10px;">
        </select>
    
    <input type="text" id="gastoCategoriaManual" placeholder="âœï¸ Escribe el nombre de la categorÃ­a..." style="display:none; margin-bottom:10px; border:2px solid #2563eb;" />

    <label>Monto ($):</label>
    <input type="number" id="gastoCantidad" placeholder="0.00" />

    <label>DescripciÃ³n (Opcional):</label>
    <input type="text" id="gastoDescripcion" placeholder="Detalle extra (Ej. Marca del aceite)" />

    <div style="margin:10px 0; padding:10px; background:#f9f9f9; border-radius:5px; border:1px solid #ddd;">
        <label style="display:flex; align-items:center; gap:8px; cursor:pointer; font-weight:bold; color:#2563eb;">
            <input type="checkbox" id="gastoRecurrenteCheck"> ğŸ“… Â¿Es un gasto fijo mensual?
        </label>
        <div id="divDiaPago" style="display:none; margin-top:8px;">
            <p class="nota" style="margin-bottom:5px;">Esto lo agregarÃ¡ a tu lista de obligaciones y ajustarÃ¡ tu Meta Diaria.</p>
            <label style="font-size:0.9rem;">DÃ­a de pago (1-31):</label>
            <input type="number" id="gastoDiaPago" placeholder="Ej. 15" min="1" max="31" style="width:80px;" />
        </div>
    </div>

    <button id="btnRegistrarGasto" class="btn-danger" type="button">Registrar Gasto</button>
  </section>

  <section class="card">
    <h2>â›½ Carga de Combustible</h2>
    
    <div class="projection-grid" style="margin-bottom: 15px;">
        <div class="projection">
            <label>Costo Real por KM:</label>
            <span id="costoPorKmDisplay">$0.00</span>
        </div>
        <div class="projection">
            <label>PrÃ³xima Recarga:</label>
            <span id="proyeccionRepostaje">Calculando...</span>
        </div>
    </div>
    <hr style="margin:15px 0;"/>

    <div id="gasWizardPaso1">
        <label>1. Litros Cargados:</label>
        <input type="number" id="gasLitros" placeholder="0.00" />
        <button id="btnGasSiguiente1" class="btn-primary" type="button" style="width:100%; margin-top:10px;">Siguiente â¡</button>
    </div>

    <div id="gasWizardPaso2" style="display:none;">
        <label>2. Costo Total ($):</label>
        <input type="number" id="gasCosto" placeholder="$0.00" />
        <div style="display:flex; gap:10px; margin-top:10px;">
            <button id="btnGasAtras2" class="btn-secondary" type="button" style="flex:1;">â¬… AtrÃ¡s</button>
            <button id="btnGasSiguiente2" class="btn-primary" type="button" style="flex:1;">Siguiente â¡</button>
        </div>
    </div>

    <div id="gasWizardPaso3" style="display:none;">
        <label>3. Kilometraje Actual (OdÃ³metro):</label>
        <input type="number" id="gasKmActual" placeholder="Ej. 12500" />
        <div style="display:flex; gap:10px; margin-top:10px;">
             <button id="btnGasAtras3" class="btn-secondary" type="button" style="flex:1;">â¬… AtrÃ¡s</button>
             <button id="btnRegistrarCargaFinal" class="btn-success" type="button" style="flex:1;">âœ… Guardar Carga</button>
        </div>
    </div>
  </section>

  <section class="card">
    <h2>Mantenimiento (Alertas por KM)</h2>
    <label>Aceite (Cada X KM):</label>
    <input type="number" id="mantenimientoAceite" />
    <label>BujÃ­a (Cada X KM):</label>
    <input type="number" id="mantenimientoBujia" />
    <label>Llantas (Cada X KM):</label>
    <input type="number" id="mantenimientoLlantas" />
    <button id="btnGuardarMantenimiento" class="btn-secondary" type="button">Guardar Umbrales</button>
  </section>

  <section class="card">
    <h2>ğŸ“‰ Obligaciones Financieras</h2>
    
    <div style="background:#f0f9ff; padding:15px; border-radius:8px; margin-bottom:20px; border:1px solid #bae6fd;">
        <h3 style="color:#0369a1; margin-top:0;">ğŸ“… Gastos Fijos Mensuales Activos</h3>
        <ul id="listaGastosFijos" class="list" style="margin-bottom:10px;"></ul>
        <div style="text-align:right; font-weight:bold; color:#0369a1;">
            Total Mensual Fijo: <span id="totalFijoMensualDisplay">$0.00</span>
        </div>
    </div>

    <hr style="margin:20px 0;" />

    <h3>ğŸ’³ Deudas (PrÃ©stamos / Tarjetas)</h3>
    <div id="wizardStep1">
      <label>Monto Total de la Deuda:</label>
      <input type="number" id="deudaMontoTotal" placeholder="Ej. 5000" />
      <label>DescripciÃ³n:</label>
      <input type="text" id="deudaDescripcion" placeholder="Ej. Tarjeta Azul" />
      <button id="btnSiguienteDeuda" class="btn-primary" type="button">Registrar Nueva Deuda</button>
    </div>

    <div style="margin-top:20px;">
        <h3>Registrar Abono a Deuda</h3>
        <select id="abonoSeleccionar"></select>
        <div style="display:flex; gap:10px; margin-top:5px;">
            <input type="number" id="abonoMonto" placeholder="Monto ($)" style="flex:1;" />
            <button id="btnRegistrarAbono" class="btn-success" type="button" style="flex:1;">Abonar</button>
        </div>
    </div>

    <ul id="listaDeudas" class="list" style="margin-top:15px;"></ul>
    
    <hr style="margin:20px 0;" />
    
    <div style="background:#ecfdf5; padding:15px; border-radius:8px; border:1px solid #6ee7b7; text-align:center;">
        <h3>ğŸ¯ Meta Diaria Calculada</h3>
        <h1 id="metaDiariaDisplay" style="color:#059669; font-size:2rem; margin:10px 0;">$0.00</h1>
        <p class="nota">Calculado: (Gastos Fijos / 30) + (Abono Deudas Sugerido)</p>
    </div>
  </section>

  <section class="card">
    <h2>Respaldo</h2>
    <button id="btnExportar" class="btn-secondary" type="button">Copiar Datos (JSON)</button>
    <div style="margin-top:10px;">
      <textarea id="importJson" rows="2" placeholder="Pegar JSON aquÃ­..."></textarea>
      <button id="btnImportar" class="btn-danger" type="button">Restaurar</button>
    </div>
  </section>

</main>
<script src="app.js"></script>
</body>
</html>
