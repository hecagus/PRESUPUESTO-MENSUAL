<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Presupuesto Mensual</title>
    <link rel="stylesheet" href="assets/css/style.css"> 
</head>
<body>

<header class="app-header">
    <div class="header-inner">
        <div class="brand">
            <span class="logo">üí∞ Presupuesto</span>
            <div class="muted">Gesti√≥n de Finanzas Personales</div>
        </div>
        <div class="tabs">
            <a href="#" class="tab active" onclick="showSection('resumen')">Resumen</a>
            <a href="#" class="tab" onclick="showSection('admin')">Admin</a>
        </div>
    </div>
</header>
<div class="container">

<div id="resumen" class="section card">

    <h2>üìä Resumen Financiero</h2>
    <h3>üí≥ Deuda Total</h3>
    <p>Deuda actual: <strong>$<span id="deudaTotalLabel">0.00</span></strong></p>

    <h2>Total ingresos</h2>
    <p id="total-ingresos">$0.00</p>

    <h2>Total gastos</h2>
    <p id="total-gastos">$0.00</p>

    <h2>Balance</h2>
    <p id="balance">$0.00</p>

    <h2>Movimientos recientes</h2>
    <table id="tabla-recientes"></table>

    <h2>Gastos por categor√≠a</h2>
    <canvas id="grafica-categorias"></canvas>

    <h2>Balance por mes</h2>
    <canvas id="grafica-mensual"></canvas>

</div>

<div id="admin" class="section card" style="display:none;">

    <h2>‚ûï Agregar Movimiento</h2>

    <label>Fecha:</label>
    <input type="date" id="fecha">

    <label>Tipo:</label>
    <select id="tipo">
        <option value="Ingreso">Ingreso</option>
        <option value="Gasto">Gasto</option>
        <option value="Nueva Deuda">Nueva Deuda</option>
        <option value="Abono Deuda">Abono Deuda</option>
    </select>
    
    <label>Categor√≠a:</label>
    <select id="categoria"></select>
    
    <label>Agregar nueva categor√≠a:</label>
    <input type="text" id="nuevaCategoria" placeholder="Ej. Gasolina extra">
    
    <button onclick="agregarCategoria()">Agregar categor√≠a</button>
    
    <label>Descripci√≥n:</label>
    <input id="mov-desc" placeholder="Descripci√≥n opcional">

    <label>Monto:</label>
    <input type="number" id="monto" placeholder="0.00">

    <button onclick="agregarMovimiento()">Guardar Movimiento</button>

    ---

    <h2>üöó Configuraci√≥n de Kilometraje</h2>

    <label>Kilometraje Inicial:</label>
    <input type="number" id="kmInicial">

    <label>Kilometraje Final:</label>
    <input type="number" id="kmFinal">
    
    <label>Gasto Total (tanque, gas, etc):</label>
    <input type="number" id="gastoTotal">

    <div class="section-title">Precio por km calculado:</div>
    <strong>$<span id="precioKm">0.00</span></strong>

    <button onclick="calcularKm()">Calcular y Guardar</button>
    <button onclick="cargarConfiguracionKm()">Cargar Configuraci√≥n</button>
    
    ---
    
    <h2>Exportar / Importar</h2>
    <button onclick="exportarJSON()">Exportar datos</button>
    <textarea id="json-area"></textarea><br>

    <button onclick="importarJSON()">Importar</button>

    <h2>Movimientos (todos)</h2>
    <table id="tabla-todos"></table>

</div>

</div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="assets/js/app.js"></script>
<script>
    // Funci√≥n de ayuda para la navegaci√≥n de pesta√±as
    function showSection(sectionId) {
        const sections = ['resumen', 'admin'];
        sections.forEach(id => {
            const el = document.getElementById(id);
            if (el) el.style.display = (id === sectionId) ? 'block' : 'none';
        });

        // Actualizar clase de pesta√±as (tabs)
        const tabs = document.querySelectorAll('.tabs .tab');
        tabs.forEach(tab => {
            tab.classList.remove('active');
        });
        const activeTab = document.querySelector(`.tabs a[onclick*="${sectionId}"]`);
        if (activeTab) activeTab.classList.add('active');
    }

    // Al cargar la p√°gina, se inicializa el resumen (y se llama al window.onload de app.js)
    window.addEventListener('load', () => {
        showSection('resumen');
    });

    // Estas funciones (exportarJSON/importarJSON) necesitan ser implementadas en app.js
    function exportarJSON() {
        console.warn("Funci√≥n 'exportarJSON' no implementada en assets/js/app.js.");
        alert("La funcionalidad de Exportar JSON a√∫n no est√° implementada.");
    }
    function importarJSON() {
        console.warn("Funci√≥n 'importarJSON' no implementada en assets/js/app.js.");
        alert("La funcionalidad de Importar JSON a√∫n no est√° implementada.");
    }
</script>

</body>
</html>
